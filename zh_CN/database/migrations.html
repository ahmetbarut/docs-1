<!DOCTYPE html>
<html lang="zh-CN" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>数据库迁移 | Goravel</title>
    <meta name="description" content="Goravel 是一个功能完整且可扩展性极强的 Web 应用程序框架。作为一个起始脚手架，帮助 Gopher 快速构建自己的应用程序。">
    <meta name="generator" content="VitePress v2.0.0-alpha.4">
    <link rel="preload stylesheet" href="/assets/style.cy8iKjPb.css" as="style">
    <link rel="preload stylesheet" href="/vp-icons.css" as="style">
    <script type="module" src="/assets/chunks/metadata.bf717ac9.js"></script>
    <script type="module" src="/assets/app.CBmMZJk1.js"></script>
    <link rel="preload" href="/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/assets/chunks/theme.BKAggZmQ.js">
    <link rel="modulepreload" href="/assets/chunks/framework.CFMQV-X7.js">
    <link rel="modulepreload" href="/assets/zh_CN_database_migrations.md.DK1vkpiu.lean.js">
    <script crossorigin="anonymous" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4978322804450032"></script>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-HJQNEG5H69"></script>
    <script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-HJQNEG5H69");</script>
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-d6df760c><!--[--><!--]--><!--[--><span tabindex="-1" data-v-d8d636c3></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-d8d636c3>跳转到内容</a><!--]--><!----><header class="VPNav" data-v-d6df760c data-v-dbc27aa9><div class="VPNavBar" data-v-dbc27aa9 data-v-5174d48f><div class="wrapper" data-v-5174d48f><div class="container" data-v-5174d48f><div class="title" data-v-5174d48f><div class="VPNavBarTitle has-sidebar" data-v-5174d48f data-v-aeddbada><a class="title" href="/zh_CN/" data-v-aeddbada><!--[--><!--]--><!--[--><img class="VPImage logo" src="/logo.png" alt data-v-63f974a0><!--]--><!----><!--[--><!--]--></a></div></div><div class="content" data-v-5174d48f><div class="content-body" data-v-5174d48f><!--[--><!--]--><div class="VPNavBarSearch search" data-v-5174d48f><!--[--><!----><div id="docsearch"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><span class="vp-icon DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">搜索文档</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-5174d48f data-v-490952b4><span id="main-nav-aria-label" class="visually-hidden" data-v-490952b4> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/zh_CN/getting-started/installation" tabindex="0" data-v-490952b4 data-v-6c7f396e><!--[--><span data-v-6c7f396e>快速开始</span><!--]--></a><!--]--><!--[--><a class="VPLink link vp-external-link-icon VPNavBarMenuLink" href="https://space.bilibili.com/1886603340/channel/seriesdetail?sid=4302621&amp;ctype=0" target="_blank" rel="noreferrer" tabindex="0" data-v-490952b4 data-v-6c7f396e><!--[--><span data-v-6c7f396e>视频教程</span><!--]--></a><!--]--><!--]--></nav><div class="VPFlyout VPNavBarTranslations translations" data-v-5174d48f data-v-d0678a6d data-v-e6465ef1><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="切换语言" data-v-e6465ef1><span class="text" data-v-e6465ef1><span class="vpi-languages option-icon" data-v-e6465ef1></span><!----><span class="vpi-chevron-down text-icon" data-v-e6465ef1></span></span></button><div class="menu" data-v-e6465ef1><div class="VPMenu" data-v-e6465ef1 data-v-83358825><!----><!--[--><!--[--><div class="items" data-v-d0678a6d><p class="title" data-v-d0678a6d>简体中文</p><!--[--><div class="VPMenuLink" data-v-d0678a6d data-v-b61a5399><a class="VPLink link" href="/database/migrations" data-v-b61a5399><!--[--><span data-v-b61a5399>English</span><!--]--></a></div><!--]--></div><!--]--><!--]--></div></div></div><div class="VPNavBarAppearance appearance" data-v-5174d48f data-v-1e6ddc1f><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-1e6ddc1f data-v-0048fb3d data-v-a3b31b8e><span class="check" data-v-a3b31b8e><span class="icon" data-v-a3b31b8e><!--[--><span class="vpi-sun sun" data-v-0048fb3d></span><span class="vpi-moon moon" data-v-0048fb3d></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-5174d48f data-v-73b0cd19 data-v-0b95c48d><!--[--><a class="VPSocialLink no-icon" href="https://github.com/goravel/goravel" aria-label="github" target="_blank" rel="noopener" data-v-0b95c48d data-v-666a4039><span class="vpi-social-github"></span></a><a class="VPSocialLink no-icon" href="https://discord.gg/cFc5csczzS" aria-label="discord" target="_blank" rel="noopener" data-v-0b95c48d data-v-666a4039><span class="vpi-social-discord"></span></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-5174d48f data-v-4a7f17ad data-v-e6465ef1><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-e6465ef1><span class="vpi-more-horizontal icon" data-v-e6465ef1></span></button><div class="menu" data-v-e6465ef1><div class="VPMenu" data-v-e6465ef1 data-v-83358825><!----><!--[--><!--[--><div class="group translations" data-v-4a7f17ad><p class="trans-title" data-v-4a7f17ad>简体中文</p><!--[--><div class="VPMenuLink" data-v-4a7f17ad data-v-b61a5399><a class="VPLink link" href="/database/migrations" data-v-b61a5399><!--[--><span data-v-b61a5399>English</span><!--]--></a></div><!--]--></div><div class="group" data-v-4a7f17ad><div class="item appearance" data-v-4a7f17ad><p class="label" data-v-4a7f17ad>主题</p><div class="appearance-action" data-v-4a7f17ad><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-4a7f17ad data-v-0048fb3d data-v-a3b31b8e><span class="check" data-v-a3b31b8e><span class="icon" data-v-a3b31b8e><!--[--><span class="vpi-sun sun" data-v-0048fb3d></span><span class="vpi-moon moon" data-v-0048fb3d></span><!--]--></span></span></button></div></div></div><div class="group" data-v-4a7f17ad><div class="item social-links" data-v-4a7f17ad><div class="VPSocialLinks social-links-list" data-v-4a7f17ad data-v-0b95c48d><!--[--><a class="VPSocialLink no-icon" href="https://github.com/goravel/goravel" aria-label="github" target="_blank" rel="noopener" data-v-0b95c48d data-v-666a4039><span class="vpi-social-github"></span></a><a class="VPSocialLink no-icon" href="https://discord.gg/cFc5csczzS" aria-label="discord" target="_blank" rel="noopener" data-v-0b95c48d data-v-666a4039><span class="vpi-social-discord"></span></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-5174d48f data-v-5d1ba094><span class="container" data-v-5d1ba094><span class="top" data-v-5d1ba094></span><span class="middle" data-v-5d1ba094></span><span class="bottom" data-v-5d1ba094></span></span></button></div></div></div></div><div class="divider" data-v-5174d48f><div class="divider-line" data-v-5174d48f></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-d6df760c data-v-dc2877b3><div class="container" data-v-dc2877b3><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-dc2877b3><span class="vpi-align-left menu-icon" data-v-dc2877b3></span><span class="menu-text" data-v-dc2877b3>菜单</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-dc2877b3 data-v-16bd36d5><button data-v-16bd36d5>回到顶部</button><!----></div></div></div><aside class="VPSidebar" data-v-d6df760c data-v-3db2fa1f><div class="curtain" data-v-3db2fa1f></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-3db2fa1f><span class="visually-hidden" id="sidebar-aria-label" data-v-3db2fa1f> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-46711a42><section class="VPSidebarItem level-0" data-v-46711a42 data-v-3e02d2e1><div class="item" role="button" tabindex="0" data-v-3e02d2e1><div class="indicator" data-v-3e02d2e1></div><h2 class="text" data-v-3e02d2e1>快速开始</h2><!----></div><div class="items" data-v-3e02d2e1><!--[--><div class="VPSidebarItem level-1 is-link" data-v-3e02d2e1 data-v-3e02d2e1><div class="item" data-v-3e02d2e1><div class="indicator" data-v-3e02d2e1></div><a class="VPLink link link" href="/zh_CN/getting-started/installation" data-v-3e02d2e1><!--[--><p class="text" data-v-3e02d2e1>安装</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-3e02d2e1 data-v-3e02d2e1><div class="item" data-v-3e02d2e1><div class="indicator" data-v-3e02d2e1></div><a class="VPLink link link" href="/zh_CN/getting-started/configuration" data-v-3e02d2e1><!--[--><p class="text" data-v-3e02d2e1>配置</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-3e02d2e1 data-v-3e02d2e1><div class="item" data-v-3e02d2e1><div class="indicator" data-v-3e02d2e1></div><a class="VPLink link link" href="/zh_CN/getting-started/directory-structure" data-v-3e02d2e1><!--[--><p class="text" data-v-3e02d2e1>目录结构</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-3e02d2e1 data-v-3e02d2e1><div class="item" data-v-3e02d2e1><div class="indicator" data-v-3e02d2e1></div><a class="VPLink link link" href="/zh_CN/getting-started/compile" data-v-3e02d2e1><!--[--><p class="text" data-v-3e02d2e1>编译</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-3e02d2e1 data-v-3e02d2e1><div class="item" data-v-3e02d2e1><div class="indicator" data-v-3e02d2e1></div><a class="VPLink link link" href="/zh_CN/getting-started/contributing" data-v-3e02d2e1><!--[--><p class="text" data-v-3e02d2e1>贡献</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-3e02d2e1 data-v-3e02d2e1><div class="item" data-v-3e02d2e1><div class="indicator" data-v-3e02d2e1></div><a class="VPLink link link" href="/zh_CN/getting-started/packages" data-v-3e02d2e1><!--[--><p class="text" data-v-3e02d2e1>优秀拓展包</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-3e02d2e1 data-v-3e02d2e1><div class="item" data-v-3e02d2e1><div class="indicator" data-v-3e02d2e1></div><a class="VPLink link link" href="/zh_CN/getting-started/privacy" data-v-3e02d2e1><!--[--><p class="text" data-v-3e02d2e1>隐私政策</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-46711a42><section class="VPSidebarItem level-0" data-v-46711a42 data-v-3e02d2e1><div class="item" role="button" tabindex="0" data-v-3e02d2e1><div class="indicator" data-v-3e02d2e1></div><h2 class="text" data-v-3e02d2e1>升级</h2><!----></div><div class="items" data-v-3e02d2e1><!--[--><div class="VPSidebarItem level-1 is-link" data-v-3e02d2e1 data-v-3e02d2e1><div class="item" data-v-3e02d2e1><div class="indicator" data-v-3e02d2e1></div><a class="VPLink link link" href="/zh_CN/upgrade/v1.15" data-v-3e02d2e1><!--[--><p class="text" data-v-3e02d2e1>从 v1.15 升级</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-3e02d2e1 data-v-3e02d2e1><div class="item" data-v-3e02d2e1><div class="indicator" data-v-3e02d2e1></div><a class="VPLink link link" href="/zh_CN/upgrade/v1.14" data-v-3e02d2e1><!--[--><p class="text" data-v-3e02d2e1>从 v1.14 升级</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-3e02d2e1 data-v-3e02d2e1><div class="item" data-v-3e02d2e1><div class="indicator" data-v-3e02d2e1></div><a class="VPLink link link" href="/zh_CN/upgrade/history" data-v-3e02d2e1><!--[--><p class="text" data-v-3e02d2e1>历史</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-46711a42><section class="VPSidebarItem level-0" data-v-46711a42 data-v-3e02d2e1><div class="item" role="button" tabindex="0" data-v-3e02d2e1><div class="indicator" data-v-3e02d2e1></div><h2 class="text" data-v-3e02d2e1>核心架构</h2><!----></div><div class="items" data-v-3e02d2e1><!--[--><div class="VPSidebarItem level-1 is-link" data-v-3e02d2e1 data-v-3e02d2e1><div class="item" data-v-3e02d2e1><div class="indicator" data-v-3e02d2e1></div><a class="VPLink link link" href="/zh_CN/architecture-concepts/request-lifecycle" data-v-3e02d2e1><!--[--><p class="text" data-v-3e02d2e1>生命周期</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-3e02d2e1 data-v-3e02d2e1><div class="item" data-v-3e02d2e1><div class="indicator" data-v-3e02d2e1></div><a class="VPLink link link" href="/zh_CN/architecture-concepts/service-container" data-v-3e02d2e1><!--[--><p class="text" data-v-3e02d2e1>服务容器</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-3e02d2e1 data-v-3e02d2e1><div class="item" data-v-3e02d2e1><div class="indicator" data-v-3e02d2e1></div><a class="VPLink link link" href="/zh_CN/architecture-concepts/service-providers" data-v-3e02d2e1><!--[--><p class="text" data-v-3e02d2e1>服务提供者</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-3e02d2e1 data-v-3e02d2e1><div class="item" data-v-3e02d2e1><div class="indicator" data-v-3e02d2e1></div><a class="VPLink link link" href="/zh_CN/architecture-concepts/facades" data-v-3e02d2e1><!--[--><p class="text" data-v-3e02d2e1>门面</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-46711a42><section class="VPSidebarItem level-0" data-v-46711a42 data-v-3e02d2e1><div class="item" role="button" tabindex="0" data-v-3e02d2e1><div class="indicator" data-v-3e02d2e1></div><h2 class="text" data-v-3e02d2e1>基本功能</h2><!----></div><div class="items" data-v-3e02d2e1><!--[--><div class="VPSidebarItem level-1 is-link" data-v-3e02d2e1 data-v-3e02d2e1><div class="item" data-v-3e02d2e1><div class="indicator" data-v-3e02d2e1></div><a class="VPLink link link" href="/zh_CN/the-basics/routing" data-v-3e02d2e1><!--[--><p class="text" data-v-3e02d2e1>路由</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-3e02d2e1 data-v-3e02d2e1><div class="item" data-v-3e02d2e1><div class="indicator" data-v-3e02d2e1></div><a class="VPLink link link" href="/zh_CN/the-basics/middlewares" data-v-3e02d2e1><!--[--><p class="text" data-v-3e02d2e1>中间件</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-3e02d2e1 data-v-3e02d2e1><div class="item" data-v-3e02d2e1><div class="indicator" data-v-3e02d2e1></div><a class="VPLink link link" href="/zh_CN/the-basics/controllers" data-v-3e02d2e1><!--[--><p class="text" data-v-3e02d2e1>控制器</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-3e02d2e1 data-v-3e02d2e1><div class="item" data-v-3e02d2e1><div class="indicator" data-v-3e02d2e1></div><a class="VPLink link link" href="/zh_CN/the-basics/request" data-v-3e02d2e1><!--[--><p class="text" data-v-3e02d2e1>请求</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-3e02d2e1 data-v-3e02d2e1><div class="item" data-v-3e02d2e1><div class="indicator" data-v-3e02d2e1></div><a class="VPLink link link" href="/zh_CN/the-basics/response" data-v-3e02d2e1><!--[--><p class="text" data-v-3e02d2e1>响应</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-3e02d2e1 data-v-3e02d2e1><div class="item" data-v-3e02d2e1><div class="indicator" data-v-3e02d2e1></div><a class="VPLink link link" href="/zh_CN/the-basics/views" data-v-3e02d2e1><!--[--><p class="text" data-v-3e02d2e1>视图</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-3e02d2e1 data-v-3e02d2e1><div class="item" data-v-3e02d2e1><div class="indicator" data-v-3e02d2e1></div><a class="VPLink link link" href="/zh_CN/the-basics/grpc" data-v-3e02d2e1><!--[--><p class="text" data-v-3e02d2e1>Grpc</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-3e02d2e1 data-v-3e02d2e1><div class="item" data-v-3e02d2e1><div class="indicator" data-v-3e02d2e1></div><a class="VPLink link link" href="/zh_CN/the-basics/session" data-v-3e02d2e1><!--[--><p class="text" data-v-3e02d2e1>会话</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-3e02d2e1 data-v-3e02d2e1><div class="item" data-v-3e02d2e1><div class="indicator" data-v-3e02d2e1></div><a class="VPLink link link" href="/zh_CN/the-basics/validation" data-v-3e02d2e1><!--[--><p class="text" data-v-3e02d2e1>验证</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-3e02d2e1 data-v-3e02d2e1><div class="item" data-v-3e02d2e1><div class="indicator" data-v-3e02d2e1></div><a class="VPLink link link" href="/zh_CN/the-basics/logging" data-v-3e02d2e1><!--[--><p class="text" data-v-3e02d2e1>日志</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-46711a42><section class="VPSidebarItem level-0" data-v-46711a42 data-v-3e02d2e1><div class="item" role="button" tabindex="0" data-v-3e02d2e1><div class="indicator" data-v-3e02d2e1></div><h2 class="text" data-v-3e02d2e1>高级功能</h2><!----></div><div class="items" data-v-3e02d2e1><!--[--><div class="VPSidebarItem level-1 is-link" data-v-3e02d2e1 data-v-3e02d2e1><div class="item" data-v-3e02d2e1><div class="indicator" data-v-3e02d2e1></div><a class="VPLink link link" href="/zh_CN/digging-deeper/artisan-console" data-v-3e02d2e1><!--[--><p class="text" data-v-3e02d2e1>Artisan Console</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-3e02d2e1 data-v-3e02d2e1><div class="item" data-v-3e02d2e1><div class="indicator" data-v-3e02d2e1></div><a class="VPLink link link" href="/zh_CN/digging-deeper/cache" data-v-3e02d2e1><!--[--><p class="text" data-v-3e02d2e1>缓存</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-3e02d2e1 data-v-3e02d2e1><div class="item" data-v-3e02d2e1><div class="indicator" data-v-3e02d2e1></div><a class="VPLink link link" href="/zh_CN/digging-deeper/events" data-v-3e02d2e1><!--[--><p class="text" data-v-3e02d2e1>事件</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-3e02d2e1 data-v-3e02d2e1><div class="item" data-v-3e02d2e1><div class="indicator" data-v-3e02d2e1></div><a class="VPLink link link" href="/zh_CN/digging-deeper/filesystem" data-v-3e02d2e1><!--[--><p class="text" data-v-3e02d2e1>文件存储</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-3e02d2e1 data-v-3e02d2e1><div class="item" data-v-3e02d2e1><div class="indicator" data-v-3e02d2e1></div><a class="VPLink link link" href="/zh_CN/digging-deeper/mail" data-v-3e02d2e1><!--[--><p class="text" data-v-3e02d2e1>邮件</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-3e02d2e1 data-v-3e02d2e1><div class="item" data-v-3e02d2e1><div class="indicator" data-v-3e02d2e1></div><a class="VPLink link link" href="/zh_CN/digging-deeper/queues" data-v-3e02d2e1><!--[--><p class="text" data-v-3e02d2e1>队列</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-3e02d2e1 data-v-3e02d2e1><div class="item" data-v-3e02d2e1><div class="indicator" data-v-3e02d2e1></div><a class="VPLink link link" href="/zh_CN/digging-deeper/task-scheduling" data-v-3e02d2e1><!--[--><p class="text" data-v-3e02d2e1>任务调度</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-3e02d2e1 data-v-3e02d2e1><div class="item" data-v-3e02d2e1><div class="indicator" data-v-3e02d2e1></div><a class="VPLink link link" href="/zh_CN/digging-deeper/localization" data-v-3e02d2e1><!--[--><p class="text" data-v-3e02d2e1>本地化</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-3e02d2e1 data-v-3e02d2e1><div class="item" data-v-3e02d2e1><div class="indicator" data-v-3e02d2e1></div><a class="VPLink link link" href="/zh_CN/digging-deeper/package-development" data-v-3e02d2e1><!--[--><p class="text" data-v-3e02d2e1>包开发</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-3e02d2e1 data-v-3e02d2e1><div class="item" data-v-3e02d2e1><div class="indicator" data-v-3e02d2e1></div><a class="VPLink link link" href="/zh_CN/digging-deeper/color" data-v-3e02d2e1><!--[--><p class="text" data-v-3e02d2e1>彩色输出</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-3e02d2e1 data-v-3e02d2e1><div class="item" data-v-3e02d2e1><div class="indicator" data-v-3e02d2e1></div><a class="VPLink link link" href="/zh_CN/digging-deeper/strings" data-v-3e02d2e1><!--[--><p class="text" data-v-3e02d2e1>字符串</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-3e02d2e1 data-v-3e02d2e1><div class="item" data-v-3e02d2e1><div class="indicator" data-v-3e02d2e1></div><a class="VPLink link link" href="/zh_CN/digging-deeper/helpers" data-v-3e02d2e1><!--[--><p class="text" data-v-3e02d2e1>辅助函数</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-46711a42><section class="VPSidebarItem level-0" data-v-46711a42 data-v-3e02d2e1><div class="item" role="button" tabindex="0" data-v-3e02d2e1><div class="indicator" data-v-3e02d2e1></div><h2 class="text" data-v-3e02d2e1>安全</h2><!----></div><div class="items" data-v-3e02d2e1><!--[--><div class="VPSidebarItem level-1 is-link" data-v-3e02d2e1 data-v-3e02d2e1><div class="item" data-v-3e02d2e1><div class="indicator" data-v-3e02d2e1></div><a class="VPLink link link" href="/zh_CN/security/authentication" data-v-3e02d2e1><!--[--><p class="text" data-v-3e02d2e1>身份验证</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-3e02d2e1 data-v-3e02d2e1><div class="item" data-v-3e02d2e1><div class="indicator" data-v-3e02d2e1></div><a class="VPLink link link" href="/zh_CN/security/authorization" data-v-3e02d2e1><!--[--><p class="text" data-v-3e02d2e1>授权</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-3e02d2e1 data-v-3e02d2e1><div class="item" data-v-3e02d2e1><div class="indicator" data-v-3e02d2e1></div><a class="VPLink link link" href="/zh_CN/security/encryption" data-v-3e02d2e1><!--[--><p class="text" data-v-3e02d2e1>加密</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-3e02d2e1 data-v-3e02d2e1><div class="item" data-v-3e02d2e1><div class="indicator" data-v-3e02d2e1></div><a class="VPLink link link" href="/zh_CN/security/hashing" data-v-3e02d2e1><!--[--><p class="text" data-v-3e02d2e1>哈希</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-46711a42><section class="VPSidebarItem level-0 has-active" data-v-46711a42 data-v-3e02d2e1><div class="item" role="button" tabindex="0" data-v-3e02d2e1><div class="indicator" data-v-3e02d2e1></div><h2 class="text" data-v-3e02d2e1>数据库</h2><!----></div><div class="items" data-v-3e02d2e1><!--[--><div class="VPSidebarItem level-1 is-link" data-v-3e02d2e1 data-v-3e02d2e1><div class="item" data-v-3e02d2e1><div class="indicator" data-v-3e02d2e1></div><a class="VPLink link link" href="/zh_CN/database/getting-started" data-v-3e02d2e1><!--[--><p class="text" data-v-3e02d2e1>开始使用</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-3e02d2e1 data-v-3e02d2e1><div class="item" data-v-3e02d2e1><div class="indicator" data-v-3e02d2e1></div><a class="VPLink link link" href="/zh_CN/database/queries" data-v-3e02d2e1><!--[--><p class="text" data-v-3e02d2e1>查询构建器</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-3e02d2e1 data-v-3e02d2e1><div class="item" data-v-3e02d2e1><div class="indicator" data-v-3e02d2e1></div><a class="VPLink link link" href="/zh_CN/database/migrations" data-v-3e02d2e1><!--[--><p class="text" data-v-3e02d2e1>迁移</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-3e02d2e1 data-v-3e02d2e1><div class="item" data-v-3e02d2e1><div class="indicator" data-v-3e02d2e1></div><a class="VPLink link link" href="/zh_CN/database/seeding" data-v-3e02d2e1><!--[--><p class="text" data-v-3e02d2e1>填充</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-46711a42><section class="VPSidebarItem level-0" data-v-46711a42 data-v-3e02d2e1><div class="item" role="button" tabindex="0" data-v-3e02d2e1><div class="indicator" data-v-3e02d2e1></div><h2 class="text" data-v-3e02d2e1>ORM</h2><!----></div><div class="items" data-v-3e02d2e1><!--[--><div class="VPSidebarItem level-1 is-link" data-v-3e02d2e1 data-v-3e02d2e1><div class="item" data-v-3e02d2e1><div class="indicator" data-v-3e02d2e1></div><a class="VPLink link link" href="/zh_CN/orm/getting-started" data-v-3e02d2e1><!--[--><p class="text" data-v-3e02d2e1>开始使用</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-3e02d2e1 data-v-3e02d2e1><div class="item" data-v-3e02d2e1><div class="indicator" data-v-3e02d2e1></div><a class="VPLink link link" href="/zh_CN/orm/relationships" data-v-3e02d2e1><!--[--><p class="text" data-v-3e02d2e1>关系</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-3e02d2e1 data-v-3e02d2e1><div class="item" data-v-3e02d2e1><div class="indicator" data-v-3e02d2e1></div><a class="VPLink link link" href="/zh_CN/orm/factories" data-v-3e02d2e1><!--[--><p class="text" data-v-3e02d2e1>工厂</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-46711a42><section class="VPSidebarItem level-0" data-v-46711a42 data-v-3e02d2e1><div class="item" role="button" tabindex="0" data-v-3e02d2e1><div class="indicator" data-v-3e02d2e1></div><h2 class="text" data-v-3e02d2e1>测试</h2><!----></div><div class="items" data-v-3e02d2e1><!--[--><div class="VPSidebarItem level-1 is-link" data-v-3e02d2e1 data-v-3e02d2e1><div class="item" data-v-3e02d2e1><div class="indicator" data-v-3e02d2e1></div><a class="VPLink link link" href="/zh_CN/testing/getting-started" data-v-3e02d2e1><!--[--><p class="text" data-v-3e02d2e1>开始使用</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-3e02d2e1 data-v-3e02d2e1><div class="item" data-v-3e02d2e1><div class="indicator" data-v-3e02d2e1></div><a class="VPLink link link" href="/zh_CN/testing/http" data-v-3e02d2e1><!--[--><p class="text" data-v-3e02d2e1>HTTP 测试</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-3e02d2e1 data-v-3e02d2e1><div class="item" data-v-3e02d2e1><div class="indicator" data-v-3e02d2e1></div><a class="VPLink link link" href="/zh_CN/testing/mocks" data-v-3e02d2e1><!--[--><p class="text" data-v-3e02d2e1>模拟</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-d6df760c data-v-863f194d><div class="VPDoc has-sidebar has-aside" data-v-863f194d data-v-61b39345><!--[--><!--]--><div class="container" data-v-61b39345><div class="aside" data-v-61b39345><div class="aside-curtain" data-v-61b39345></div><div class="aside-container" data-v-61b39345><div class="aside-content" data-v-61b39345><div class="VPDocAside" data-v-61b39345 data-v-6a182bea><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-6a182bea data-v-acb09a7e><div class="content" data-v-acb09a7e><div class="outline-marker" data-v-acb09a7e></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-acb09a7e>页面导航</div><ul class="VPDocOutlineItem root" data-v-acb09a7e data-v-8b4f2706><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-6a182bea></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-61b39345><div class="content-container" data-v-61b39345><!--[--><!--]--><main class="main" data-v-61b39345><div style="position:relative;" class="vp-doc _zh_CN_database_migrations" data-v-61b39345><div><h1 id="数据库迁移" tabindex="-1">数据库迁移 <a class="header-anchor" href="#数据库迁移" aria-label="Permalink to “数据库迁移”">​</a></h1><nav class="table-of-contents"><ul><li><a href="#简介">简介</a></li><li><a href="#配置">配置</a></li><li><a href="#生成迁移">生成迁移</a><ul><li><a href="#快捷生成">快捷生成</a></li></ul></li><li><a href="#迁移结构">迁移结构</a><ul><li><a href="#go-语言迁移">Go 语言迁移</a></li></ul></li><li><a href="#注册迁移">注册迁移</a></li><li><a href="#执行迁移">执行迁移</a></li><li><a href="#回滚迁移">回滚迁移</a><ul><li><a href="#使用单个命令同时进行回滚和迁移操作">使用单个命令同时进行回滚和迁移操作</a></li><li><a href="#删除所有表然后执行迁移">删除所有表然后执行迁移</a></li></ul></li><li><a href="#tables">Tables</a><ul><li><a href="#创建表">创建表</a></li><li><a href="#检查表-列是否存在">检查表 / 列是否存在</a></li><li><a href="#数据库连接">数据库连接</a></li><li><a href="#更新表">更新表</a></li><li><a href="#重命名字段">重命名字段</a></li><li><a href="#添加表注释">添加表注释</a></li><li><a href="#重命名-删除表">重命名 / 删除表</a></li></ul></li><li><a href="#字段">字段</a><ul><li><a href="#可用的字段类型">可用的字段类型</a></li><li><a href="#列修饰符">列修饰符</a></li><li><a href="#删除列">删除列</a></li></ul></li><li><a href="#索引">索引</a><ul><li><a href="#创建索引">创建索引</a></li><li><a href="#重命名索引">重命名索引</a></li><li><a href="#删除索引">删除索引</a></li><li><a href="#外键约束">外键约束</a></li><li><a href="#删除外键">删除外键</a></li></ul></li></ul></nav><h2 id="简介" tabindex="-1">简介 <a class="header-anchor" href="#简介" aria-label="Permalink to “简介”">​</a></h2><p>当多人协作开发应用程序时，如果同步数据库结构没有一个统一的规范，以保证所有人的本地数据都是一致的，那将是灾难。数据库迁移就是为了解决这个问题，将数据库的结构进行版本控制，以保证所有开发人员的数据库结构的一致性。</p><h2 id="配置" tabindex="-1">配置 <a class="header-anchor" href="#配置" aria-label="Permalink to “配置”">​</a></h2><p>数据库迁移文件存放在 <code>database/migrations</code> 目录下，你可以在 <code>config/database.go</code> 文件中配置数据库连接信息。</p><div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;migrations&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">any</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // You can cumstomize the table name of migrations</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &quot;table&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:  </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;migrations&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">},</span></span></code></pre></div><h2 id="生成迁移" tabindex="-1">生成迁移 <a class="header-anchor" href="#生成迁移" aria-label="Permalink to “生成迁移”">​</a></h2><p>使用 <code>make:migration</code> 命令来创建迁移：</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">go</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> .</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> artisan</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> make:migration</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> create_users_table</span></span></code></pre></div><p>该命令会在 <code>database/migrations</code> 目录下生成迁移文件，所有迁移文件都以一个时间戳为开头，Goravel 将以此作为迁移文件的执行顺序。</p><h3 id="快捷生成" tabindex="-1">快捷生成 <a class="header-anchor" href="#快捷生成" aria-label="Permalink to “快捷生成”">​</a></h3><p>使用 <code>create_users_table</code> 将会自动生成包含 <code>users</code> 基础结构的表，实现原理是根据正则进行匹配：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span>^create_(\w+)_table$</span></span>
<span class="line"><span>^create_(\w+)$</span></span></code></pre></div><p>使用 <code>add_avatar_to_users_table</code> 将会自动生成向 <code>users</code> 表增加字段的结构，实现原理是根据正则进行匹配：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span>_(to|from|in)_(\w+)_table$</span></span>
<span class="line"><span>_(to|from|in)_(\w+)$</span></span></code></pre></div><p>未匹配到上述情况时，框架会生成一个空的迁移文件。</p><h2 id="迁移结构" tabindex="-1">迁移结构 <a class="header-anchor" href="#迁移结构" aria-label="Permalink to “迁移结构”">​</a></h2><h3 id="go-语言迁移" tabindex="-1">Go 语言迁移 <a class="header-anchor" href="#go-语言迁移" aria-label="Permalink to “Go 语言迁移”">​</a></h3><p>迁移类包含两个方法：<code>Up</code> 和 <code>Down</code>。<code>Up</code> 方法用于向数据库中添加新表、列或索引，而 <code>Down</code> 方法用于撤销 <code>Up</code> 方法执行的操作。在这两种方法中，可以使用 <code>facades.Schema()</code> 来创建和操作数据库表，起可用方法<a href="#tables">详见文档</a>。以下迁移会创建一个 <code>users</code> 表：</p><div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">package</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> migrations</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">	&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">github.com/goravel/framework/contracts/database/schema</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">	&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">github.com/goravel/framework/facades</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">type</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> M20241207095921CreateUsersTable</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> struct</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Signature The unique signature for the migration.</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">r </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">M20241207095921CreateUsersTable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Signature</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">	return</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;20241207095921_create_users_table&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Up Run the migrations.</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">r </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">M20241207095921CreateUsersTable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Up</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">	if</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> !</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">facades.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Schema</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">HasTable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;users&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">		return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> facades.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Schema</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Create</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;users&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">table</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> schema</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Blueprint</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">			table.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ID</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">			table.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Nullable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">			table.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;email&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Nullable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">			table.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Timestamps</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		})</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">	return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> nil</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Down Reverse the migrations.</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">r </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">M20241207095921CreateUsersTable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Down</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">	return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> facades.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Schema</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">DropIfExists</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;users&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h4 id="设置迁移连接" tabindex="-1">设置迁移连接 <a class="header-anchor" href="#设置迁移连接" aria-label="Permalink to “设置迁移连接”">​</a></h4><p>如果迁移将与应用程序默认数据库连接以外的数据库连接进行交互，你可以使用迁移的 <code>Connection</code> 方法：</p><div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">r </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">M20241207095921CreateUsersTable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Connection</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;connection-name&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="注册迁移" tabindex="-1">注册迁移 <a class="header-anchor" href="#注册迁移" aria-label="Permalink to “注册迁移”">​</a></h2><p>迁移文件生成后需要在 <code>database/kernel.go</code> 文件中注册，如果是通过 <code>make:migration</code> 命令生成的迁移文件，则不需要手动注册，框架会自动注册。</p><div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// database/kernel.go</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">kernel </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Kernel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Migrations</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() []</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">schema</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Migration</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">	return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> []</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">schema</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Migration</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">		&amp;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">migrations</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">M20241207095921CreateUsersTable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="执行迁移" tabindex="-1">执行迁移 <a class="header-anchor" href="#执行迁移" aria-label="Permalink to “执行迁移”">​</a></h2><p>执行 Artisan 命令 <code>migrate</code>，来运行所有未执行过的迁移：</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">go</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> .</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> artisan</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> migrate</span></span></code></pre></div><p>如果你想查看目前的迁移状态，可以使用 <code>migrate:status</code> Artisan 命令：</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">go</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> .</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> artisan</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> migrate:status</span></span></code></pre></div><h2 id="回滚迁移" tabindex="-1">回滚迁移 <a class="header-anchor" href="#回滚迁移" aria-label="Permalink to “回滚迁移”">​</a></h2><p>如果要回滚最后一次迁移操作，可以使用 Artisan 命令 <code>rollback</code>。该命令会回滚最后「一批」的迁移，这可能包含多个迁移文件：</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">go</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> .</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> artisan</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> migrate:rollback</span></span></code></pre></div><p>通过向 <code>rollback</code> 命令加上 <code>step</code> 参数，可以回滚指定数量的迁移。例如，以下命令将回滚最后五个迁移：</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">go</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> .</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> artisan</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> migrate:rollback</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --step=5</span></span></code></pre></div><p>命令 <code>migrate:reset</code> 会回滚应用已运行过的所有迁移：</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">go</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> .</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> artisan</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> migrate:reset</span></span></code></pre></div><h3 id="使用单个命令同时进行回滚和迁移操作" tabindex="-1">使用单个命令同时进行回滚和迁移操作 <a class="header-anchor" href="#使用单个命令同时进行回滚和迁移操作" aria-label="Permalink to “使用单个命令同时进行回滚和迁移操作”">​</a></h3><p>命令 <code>migrate:refresh</code> 首先会回滚已运行过的所有迁移，随后会执行 <code>migrate</code>。这一命令可以高效地重建你的整个数据库：</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">go</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> .</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> artisan</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> migrate:refresh</span></span></code></pre></div><p>通过在命令 <code>refresh</code> 中使用 <code>step</code> 参数，你可以回滚并重新执行指定数量的迁移操作。例如，下列命令会回滚并重新执行最后五个迁移操作：</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">go</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> .</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> artisan</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> migrate:refresh</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --step=5</span></span></code></pre></div><h3 id="删除所有表然后执行迁移" tabindex="-1">删除所有表然后执行迁移 <a class="header-anchor" href="#删除所有表然后执行迁移" aria-label="Permalink to “删除所有表然后执行迁移”">​</a></h3><p>命令 <code>migrate:fresh</code> 会删去数据库中的所有表，随后执行命令 <code>migrate</code>：</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">go</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> .</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> artisan</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> migrate:fresh</span></span></code></pre></div><h2 id="tables" tabindex="-1">Tables <a class="header-anchor" href="#tables" aria-label="Permalink to “Tables”">​</a></h2><h3 id="创建表" tabindex="-1">创建表 <a class="header-anchor" href="#创建表" aria-label="Permalink to “创建表”">​</a></h3><div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">facades.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Schema</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Create</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;users&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">table</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> schema</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Blueprint</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  table.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ID</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  table.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Nullable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  table.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;email&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Nullable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  table.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Timestamps</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><h3 id="检查表-列是否存在" tabindex="-1">检查表 / 列是否存在 <a class="header-anchor" href="#检查表-列是否存在" aria-label="Permalink to “检查表 / 列是否存在”">​</a></h3><div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> facades.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Schema</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">HasTable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;users&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {}</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> facades.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Schema</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">HasColumn</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;users&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;email&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {}</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> facades.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Schema</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">HasColumns</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;users&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, []</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;email&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}) {}</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> facades.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Schema</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">HasIndex</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;users&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;email_unique&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {}</span></span></code></pre></div><h3 id="数据库连接" tabindex="-1">数据库连接 <a class="header-anchor" href="#数据库连接" aria-label="Permalink to “数据库连接”">​</a></h3><div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">facades.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Schema</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Connection</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;sqlite&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Create</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;users&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">table</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> schema</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Blueprint</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  table.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ID</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><h3 id="更新表" tabindex="-1">更新表 <a class="header-anchor" href="#更新表" aria-label="Permalink to “更新表”">​</a></h3><div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">facades.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Schema</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Table</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;users&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">table</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> schema</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Blueprint</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  table.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Nullable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><h3 id="重命名字段" tabindex="-1">重命名字段 <a class="header-anchor" href="#重命名字段" aria-label="Permalink to “重命名字段”">​</a></h3><div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">facades.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Schema</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Table</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;users&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">table</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> schema</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Blueprint</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  table.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">RenameColumn</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;old_name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;new_name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><h3 id="添加表注释" tabindex="-1">添加表注释 <a class="header-anchor" href="#添加表注释" aria-label="Permalink to “添加表注释”">​</a></h3><div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">facades.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Schema</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Table</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;users&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">table</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> schema</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Blueprint</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  table.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Comment</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;user table&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><h3 id="重命名-删除表" tabindex="-1">重命名 / 删除表 <a class="header-anchor" href="#重命名-删除表" aria-label="Permalink to “重命名 / 删除表”">​</a></h3><div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">facades.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Schema</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Rename</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;users&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;new_users&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">facades.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Schema</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Drop</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;users&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">facades.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Schema</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">DropIfExists</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;users&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><h2 id="字段" tabindex="-1">字段 <a class="header-anchor" href="#字段" aria-label="Permalink to “字段”">​</a></h2><h3 id="可用的字段类型" tabindex="-1">可用的字段类型 <a class="header-anchor" href="#可用的字段类型" aria-label="Permalink to “可用的字段类型”">​</a></h3><h4 id="布尔类型" tabindex="-1">布尔类型 <a class="header-anchor" href="#布尔类型" aria-label="Permalink to “布尔类型”">​</a></h4><p>Boolean</p><h4 id="字符串-文本类型" tabindex="-1">字符串 &amp; 文本类型 <a class="header-anchor" href="#字符串-文本类型" aria-label="Permalink to “字符串 &amp; 文本类型”">​</a></h4><p>Char, Json, LongText, MediumText, String, Text, LongText, TinyText, Uuid, Ulid</p><h4 id="数字类型" tabindex="-1">数字类型 <a class="header-anchor" href="#数字类型" aria-label="Permalink to “数字类型”">​</a></h4><p>BigIncrements, BigInteger, Decimal, Double, Float, <a href="#id">ID</a>, Increments, Integer, IntegerIncrements, MediumIncrements, MediumInteger, SmallIncrements, SmallInteger, TinyIncrements, TinyInteger, UnsignedBigInteger, UnsignedInteger, UnsignedMediumInteger, UnsignedSmallInteger, UnsignedTinyInteger</p><h4 id="日期-时间类型" tabindex="-1">日期 &amp; 时间类型 <a class="header-anchor" href="#日期-时间类型" aria-label="Permalink to “日期 &amp; 时间类型”">​</a></h4><p>Date, DateTime, DateTimeTz, <a href="#softdeletes">SoftDeletes</a>, SoftDeletesTz, Time, TimeTz, Timestamp, TimestampTz, Timestamps, TimestampsTz</p><h4 id="其他类型" tabindex="-1">其他类型 <a class="header-anchor" href="#其他类型" aria-label="Permalink to “其他类型”">​</a></h4><p><a href="#enum">Enum</a>, Morphs, NullableMorphs, NumericMorphs, UuidMorphs, UlidMorphs</p><h4 id="enum" tabindex="-1">Enum <a class="header-anchor" href="#enum" aria-label="Permalink to “Enum”">​</a></h4><p>创建一个 <code>Enum</code> 字段，该字段在 <code>Mysql</code> 中可以根据 <code>[]any</code> 中的类型进行储存，但在 <code>Postgres</code>, <code>Sqlite</code> 和 <code>Sqlserver</code> 数据库中都是 <code>String</code> 类型。</p><div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">table.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Enum</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;difficulty&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, []</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">any</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;easy&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;hard&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">table.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Enum</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;num&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, []</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">any</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><h4 id="id" tabindex="-1">ID <a class="header-anchor" href="#id" aria-label="Permalink to “ID”">​</a></h4><p><code>ID</code> 方法是 <code>BigIncrements</code> 方法的别名。默认情况下，该方法将创建一个 <code>id</code> 列；但是，如果你想要为该列分配一个不同的名称，可以传递一个列名称：</p><div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">table.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ID</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">table.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ID</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;user_id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><h4 id="softdeletes" tabindex="-1">SoftDeletes <a class="header-anchor" href="#softdeletes" aria-label="Permalink to “SoftDeletes”">​</a></h4><p><code>SoftDeletes</code> 方法添加了一个可以为空的 <code>deleted_at</code> <code>TIMESTAMP</code> 列。此列旨在存储 Orm 「软删除」功能所需的 <code>deleted_at</code> 时间戳：</p><div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">table.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">SoftDeletes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span></code></pre></div><h4 id="自定义字段" tabindex="-1">自定义字段 <a class="header-anchor" href="#自定义字段" aria-label="Permalink to “自定义字段”">​</a></h4><p>如果你正在使用框架尚不支持的字段类型，可以通过 <code>Column</code> 方法自定义字段类型：</p><div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">table.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Column</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;geometry&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;geometry&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><h3 id="列修饰符" tabindex="-1">列修饰符 <a class="header-anchor" href="#列修饰符" aria-label="Permalink to “列修饰符”">​</a></h3><p>除了上面列出的列类型之外，当给数据库表添加一个列时，你还可以给列添加「修饰符」。例如，要使列可以「为空」，你可以使用 <code>Nullable</code> 方法：</p><div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">facades.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Schema</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Table</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;users&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">table</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> schema</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Blueprint</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  table.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Nullable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><p>以下表格包含所有可用的列修饰符：</p><table tabindex="0"><thead><tr><th>修饰符</th><th>描述</th></tr></thead><tbody><tr><td><code>.Always()</code></td><td>该列的值始终由数据库系统自动生成，用户不能直接插入或修改（仅限 PostgreSQL）</td></tr><tr><td><code>.AutoIncrement()</code></td><td>设置整数列为自动增长的（主键）</td></tr><tr><td><code>.After(&quot;column&quot;)</code></td><td>将列设置为指定列之后（适用于 MySQL）</td></tr><tr><td><code>.Comment(&quot;my comment&quot;)</code></td><td>向列添加注释（MySQL / PostgreSQL）</td></tr><tr><td><code>.Change()</code></td><td>修改列（MySQL / PostgreSQL / Sqlserver）</td></tr><tr><td><code>.Default(value)</code></td><td>为列指定「默认」值</td></tr><tr><td><code>.First()</code></td><td>将列设置为表的第一个字段（适用于 MySQL）</td></tr><tr><td><code>.GeneratedAs()</code></td><td>设置列的值由数据库系统自动生成（仅限 PostgreSQL）</td></tr><tr><td><code>.Nullable()</code></td><td>允许插入 NULL 值到列中</td></tr><tr><td><code>.Unsigned()</code></td><td>设置整数列为 UNSIGNED（仅限 MySQL）</td></tr><tr><td><code>.UseCurrent()</code></td><td>设置时间戳列使用 CURRENT_TIMESTAMP 作为默认值</td></tr><tr><td><code>.UseCurrentOnUpdate()</code></td><td>设置记录更新时，时间戳列使用 CURRENT_TIMESTAMP（仅限 MySQL）</td></tr></tbody></table><h3 id="删除列" tabindex="-1">删除列 <a class="header-anchor" href="#删除列" aria-label="Permalink to “删除列”">​</a></h3><div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">facades.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Schema</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Table</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;users&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">table</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> schema</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Blueprint</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  table.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">DropColumn</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  table.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">DropColumn</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;age&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><h2 id="索引" tabindex="-1">索引 <a class="header-anchor" href="#索引" aria-label="Permalink to “索引”">​</a></h2><h3 id="创建索引" tabindex="-1">创建索引 <a class="header-anchor" href="#创建索引" aria-label="Permalink to “创建索引”">​</a></h3><div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">facades.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Schema</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Table</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;users&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">table</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> schema</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Blueprint</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 添加主键</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  table.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Primary</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 添加复合主键</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  table.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Primary</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 添加唯一索引</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  table.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Unique</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  table.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Unique</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;age&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 添加普通索引</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  table.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Index</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  table.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Index</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;age&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 添加全文索引</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  table.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">FullText</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  table.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">FullText</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;age&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><h3 id="重命名索引" tabindex="-1">重命名索引 <a class="header-anchor" href="#重命名索引" aria-label="Permalink to “重命名索引”">​</a></h3><div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">facades.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Schema</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Table</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;users&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">table</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> schema</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Blueprint</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  table.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">RenameIndex</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;users_name_index&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;users_name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><h3 id="删除索引" tabindex="-1">删除索引 <a class="header-anchor" href="#删除索引" aria-label="Permalink to “删除索引”">​</a></h3><div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">facades.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Schema</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Table</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;users&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">table</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> schema</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Blueprint</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  table.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">DropPrimary</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  table.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">DropUnique</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  table.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">DropUniqueByName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;name_unique&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  table.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">DropIndex</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  table.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">DropIndexByName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;name_index&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  table.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">DropFullText</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  table.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">DropFullTextByName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;name_fulltext&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><h3 id="外键约束" tabindex="-1">外键约束 <a class="header-anchor" href="#外键约束" aria-label="Permalink to “外键约束”">​</a></h3><div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">facades.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Schema</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Table</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;posts&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">table</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> schema</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Blueprint</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  table.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">UnsignedBigInteger</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;user_id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  table.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Foreign</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;user_id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">References</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">On</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;users&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><h3 id="删除外键" tabindex="-1">删除外键 <a class="header-anchor" href="#删除外键" aria-label="Permalink to “删除外键”">​</a></h3><div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">facades.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Schema</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Table</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;users&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">table</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> schema</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Blueprint</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  table.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">DropForeign</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;user_id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  table.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">DropForeignByName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;user_id_foreign&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div></div></div></main><footer class="VPDocFooter" data-v-61b39345 data-v-0a237ad2><!--[--><!--]--><div class="edit-info" data-v-0a237ad2><div class="edit-link" data-v-0a237ad2><a class="VPLink link vp-external-link-icon no-icon edit-link-button" href="https://github.com/goravel/docs/edit/master/zh_CN/database/migrations.md" target="_blank" rel="noreferrer" data-v-0a237ad2><!--[--><span class="vpi-square-pen edit-link-icon" data-v-0a237ad2></span> 在 GitHub 上编辑此页面<!--]--></a></div><div class="last-updated" data-v-0a237ad2><p class="VPLastUpdated" data-v-0a237ad2 data-v-0f25839d>最后更新于: <time datetime="2025-07-21T14:17:03.000Z" data-v-0f25839d></time></p></div></div><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-0a237ad2><span class="visually-hidden" id="doc-footer-aria-label" data-v-0a237ad2>Pager</span><div class="pager" data-v-0a237ad2><a class="VPLink link pager-link prev" href="/zh_CN/database/queries" data-v-0a237ad2><!--[--><span class="desc" data-v-0a237ad2>上一页</span><span class="title" data-v-0a237ad2>查询构建器</span><!--]--></a></div><div class="pager" data-v-0a237ad2><a class="VPLink link pager-link next" href="/zh_CN/database/seeding" data-v-0a237ad2><!--[--><span class="desc" data-v-0a237ad2>下一页</span><span class="title" data-v-0a237ad2>填充</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter has-sidebar" data-v-d6df760c data-v-390616db><div class="container" data-v-390616db><p class="message" data-v-390616db>基于 MIT 许可发布</p><p class="copyright" data-v-390616db>版权所有 © 2021-2025 Goravel</p></div></footer><!--[--><!--]--></div></div>
    
    
  </body>
</html>